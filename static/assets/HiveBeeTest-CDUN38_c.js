import{d as le,r as I,p as M,i as ce,A as ue,w as ee,c as T,o as _,n as K,e as a,t as w,a as $,k as C,f as de,B as F,C as z,D as te,E as ve,l as ne,G as ie,F as se,b as ae,j as oe,H as ge}from"./index-BbDa_177.js";class he{config;constructor(e={}){this.config={baseUnit:20,scaleFactor:1,aspectRatio:1.2,energyLevel:.8,gravityConstant:9.81,fluidDensity:1.225,...e}}calculateMorphology(e,t={}){const{baseUnit:n,scaleFactor:i,aspectRatio:r}=this.config,o=n*i,c=this.getRolePhysics(e),v={minSize:o*.5,maxSize:o*3,aspectRatioRange:[1,2],...t},u=this.clamp(o*10,v.minSize*10,v.maxSize*10),g=u*this.clamp(r,...v.aspectRatioRange),m={x:u/2,y:g/2},l=1/1.618;return{viewBox:`0 0 ${u} ${g}`,center:m,abdomen:{center:{x:m.x,y:g*(.5+l*.3)},radius:{x:o*1.2*c.abdomenScale,y:o*1.7*c.abdomenScale}},thorax:{center:{x:m.x,y:g*(.5-l*.2)},radius:{x:o*.9*c.thoraxScale,y:o*1*c.thoraxScale}},head:{center:{x:m.x,y:g*(.5-l*.6)},radius:o*.7*c.headScale},wings:this.calculateWingGeometry(m,o,c,g),stinger:this.calculateStingerGeometry(m,o,c,g),specialFeatures:this.calculateSpecialFeatures(m,o,e,u,g)}}calculateWingGeometry(e,t,n,i){const r=t*1,o=t*1.5*n.wingScale,c=t*.7*n.wingScale,v=i*(.5-1.618*.2);return{left:{center:{x:e.x-r,y:v},radius:{x:o,y:c}},right:{center:{x:e.x+r,y:v},radius:{x:o,y:c}}}}calculateStingerGeometry(e,t,n,i){const r=t*.4*n.stingerScale,o=t*.2*n.stingerScale,c=i*.8;return{points:`${e.x},${c} ${e.x-o},${c+r} ${e.x+o},${c+r}`}}calculateSpecialFeatures(e,t,n,i,r){const o={};switch(n){case"queen":o.crown={points:`${e.x-t*.4},${r*.12} ${e.x},${r*.05} ${e.x+t*.4},${r*.12}`};break;case"chronicler":o.scroll={x:e.x-t*.75,y:r*.1,width:t*1.5,height:t*.4,radius:t*.1},o.divineAura={radius:t*1,strokeWidth:t*.1},o.quill={start:{x:e.x+t*.75,y:r*.22},end:{x:e.x+t*1.25,y:r*.17},strokeWidth:t*.1};break;case"jules":o.antenna={start:{x:e.x+t*.5,y:r*.22},end:{x:e.x+t*1,y:r*.15},strokeWidth:t*.08};break}return o}getRolePhysics(e){const t={worker:{abdomenScale:1,thoraxScale:.9,headScale:.7,wingScale:1,stingerScale:.8,massDistribution:"balanced"},scout:{abdomenScale:.8,thoraxScale:.8,headScale:.8,wingScale:1.1,stingerScale:.7,massDistribution:"wing-heavy"},queen:{abdomenScale:1.4,thoraxScale:1.1,headScale:.8,wingScale:1.2,stingerScale:1.2,massDistribution:"abdomen-heavy"},guard:{abdomenScale:1.1,thoraxScale:1.2,headScale:.6,wingScale:1,stingerScale:1.4,massDistribution:"thorax-heavy"},chronicler:{abdomenScale:.9,thoraxScale:.9,headScale:.8,wingScale:1.1,stingerScale:.6,massDistribution:"head-heavy"},jules:{abdomenScale:1,thoraxScale:.9,headScale:.8,wingScale:1,stingerScale:.8,massDistribution:"balanced"}};return t[e]||t.worker}calculateAnimationTiming(e,t){const n=this.getRolePhysics(e),{energyLevel:i}=this.config,c=.15/(n.wingScale/(n.abdomenScale+n.thoraxScale)*t*i),v=25*t,u=3/(t*.5+.5);return{wingFlapPeriod:c,wingFlapAmplitude:v,divineGlowPeriod:u}}clamp(e,t,n){return Math.min(Math.max(e,t),n)}updateConfig(e){this.config={...this.config,...e}}getStatus(){return{status:"active",config:{...this.config}}}}const W=new he;class me{subscriptions=new Map;eventHistory=[];metrics={eventsEmitted:0,eventsReceived:0,subscriptions:0,averageLatency:0,errorRate:0};maxHistorySize=1e3;emit(e,t,n){const i={id:this.generateEventId(),type:e,source:n.source,target:n.target,payload:t,timestamp:Date.now(),priority:n.priority||"normal",metadata:n.metadata};return this.addToHistory(i),this.metrics.eventsEmitted++,this.distributeEvent(i),i.id}subscribe(e,t,n){const i={id:this.generateSubscriptionId(),eventTypes:e,callback:t,filter:n};return this.subscriptions.set(i.id,i),this.metrics.subscriptions++,i.id}unsubscribe(e){const t=this.subscriptions.delete(e);return t&&this.metrics.subscriptions--,t}getHistory(e){let t=[...this.eventHistory];return e&&(e.type&&(t=t.filter(n=>n.type===e.type)),e.source&&(t=t.filter(n=>n.source===e.source)),e.since&&(t=t.filter(n=>n.timestamp>=e.since)),e.limit&&(t=t.slice(-e.limit))),t}getMetrics(){return{...this.metrics}}clearHistory(){this.eventHistory=[]}getStatus(){const e=this.eventHistory.filter(n=>Date.now()-n.timestamp<6e4).length,t=this.metrics.errorRate<.1?"healthy":this.metrics.errorRate<.3?"degraded":"unhealthy";return{status:"active",subscriptions:this.metrics.subscriptions,recentEvents:e,health:t}}distributeEvent(e){const t=performance.now();let n=0,i=0;for(const o of this.subscriptions.values())try{if(!o.eventTypes.includes(e.type)&&!o.eventTypes.includes("*")||o.filter&&!o.filter(e))continue;o.callback(e),n++,this.metrics.eventsReceived++}catch(c){console.error("Error delivering Pollen event:",c),i++}const r=performance.now()-t;this.updateLatencyMetrics(r),n>0&&(this.metrics.errorRate=this.metrics.errorRate*.9+i/n*.1)}addToHistory(e){this.eventHistory.push(e),this.eventHistory.length>this.maxHistorySize&&(this.eventHistory=this.eventHistory.slice(-this.maxHistorySize))}updateLatencyMetrics(e){this.metrics.averageLatency=this.metrics.averageLatency*.9+e*.1}generateEventId(){return`pollen_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateSubscriptionId(){return`sub_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}const R={COCOON_ENTERED:"cocoon_entered",COCOON_FAILED:"cocoon_failed",VALIDATION_PROGRESS:"validation_progress",VALIDATION_FAILED:"validation_failed",STAGE_TRANSITION:"stage_transition",BEE_EMERGED:"bee_emerged",INTENT_TRANSITION_STARTED:"intent_transition_started",INTENT_TRANSITION_PROGRESS:"intent_transition_progress",INTENT_EMERGENCE_READY:"intent_emergence_ready",EMOTIONAL_CONTAGION:"emotional_contagion",EMOTIONAL_WAVE_TRIGGERED:"emotional_wave_triggered"},E=new me;function pe(d,e,t){const{abdomen:n,thorax:i,head:r,wings:o}=d,c=n.radius.x/n.radius.y,v=Math.abs(c-1/e),u=i.radius.x/i.radius.y,g=Math.abs(u-1/e),m=o.left.radius.x/o.left.radius.y,S=Math.abs(m-e),l=(v+g+S)/3,x=l<t,D=Math.max(0,1-l/t);return{passed:x,score:D,message:x?"‚ú® Divine golden ratio proportions achieved":`‚ö†Ô∏è Golden ratio deviation: ${(l*100).toFixed(2)}%`,details:{abdomenDeviation:v,thoraxDeviation:g,wingDeviation:S,totalDeviation:l}}}function ye(d){if(!(Object.keys(d.specialFeatures).length>0))return{passed:!0,score:1,message:"‚úÖ Non-divine bee - transcendence not required"};const t="divineAura"in d.specialFeatures,n="scroll"in d.specialFeatures,i="antenna"in d.specialFeatures,r="crown"in d.specialFeatures,o=[t,n,i,r].filter(Boolean).length,c=o>0,v=o/4;return{passed:c,score:v,message:c?`‚ú® Divine transcendence manifested (${o} features)`:"‚ùå Divine bee lacks transcendent features",details:{hasAura:t,hasScroll:n,hasAntenna:i,hasCrown:r,transcendentFeatures:o}}}function fe(d,e){const{abdomen:t,thorax:n,head:i}=d,r=i.radius,o=Math.sqrt(n.radius.x*n.radius.y),c=Math.sqrt(t.radius.x*t.radius.y),v=r<o&&o<c,u=c/r,g=e*e,m=Math.abs(u-g)/g,S=v&&m<.2,l=v?Math.max(0,1-m):0;return{passed:S,score:l,message:S?"‚úÖ Anatomical harmony achieved":"‚ö†Ô∏è Body part proportions lack harmony",details:{headSize:r,thoraxSize:o,abdomenSize:c,sizeRatio:u,idealRatio:g,ratioDeviation:m,properProgression:v}}}function be(d){const e=d.viewBox.split(" ").slice(2).map(Number),[t,n]=e,{abdomen:i,thorax:r,head:o,wings:c}=d,v=Math.max(i.center.x+i.radius.x,r.center.x+r.radius.x,o.center.x+o.radius,c.left.center.x+c.left.radius.x,c.right.center.x+c.right.radius.x),u=Math.max(i.center.y+i.radius.y,r.center.y+r.radius.y,o.center.y+o.radius,c.left.center.y+c.left.radius.y,c.right.center.y+c.right.radius.y),g=v<=t&&u<=n,m=v*u/(t*n),S=g&&m>.3&&m<.9,l=g?Math.max(0,1-Math.abs(m-.6)/.3):0;return{passed:S,score:l,message:S?"‚úÖ Physics constraints satisfied":g?"‚ö†Ô∏è Suboptimal space utilization":"‚ùå Elements exceed viewBox boundaries",details:{viewBoxWidth:t,viewBoxHeight:n,maxX:v,maxY:u,fitsInViewBox:g,utilizationRatio:m}}}function xe(d,e){const{abdomen:t,thorax:n,head:i,wings:r}=d,o=r.left,c=r.right,v=Math.abs(o.radius.x-c.radius.x)<.1&&Math.abs(o.radius.y-c.radius.y)<.1,u=Math.abs(t.center.x-n.center.x)<1&&Math.abs(n.center.x-i.center.x)<1,g=t.radius.x*t.radius.y*Math.PI+n.radius.x*n.radius.y*Math.PI+i.radius*i.radius*Math.PI,S=o.radius.x*o.radius.y*Math.PI*2/g,l=1/e,x=Math.abs(S-l)/l,D=[v,u,x<.2],N=D.filter(Boolean).length>=2,P=D.filter(Boolean).length/D.length;return{passed:N,score:P,message:N?"‚úÖ Visual quality standards met":"‚ö†Ô∏è Visual quality could be improved",details:{wingSymmetry:v,centerAlignment:u,wingToBodyRatio:S,idealWingRatio:l,wingRatioDeviation:x,qualityScore:P}}}const Z=1.618033988749,we=.001,Se=[{name:"golden_ratio_compliance",description:"All proportions must follow golden ratio mathematics",validator:d=>pe(d,Z,we),severity:"critical",divineRequirement:!0},{name:"sacred_bee_transcendence",description:"Divine bees must exceed normal physical limitations",validator:d=>ye(d),severity:"error",divineRequirement:!0},{name:"morphology_coherence",description:"All body parts must maintain anatomical harmony",validator:d=>fe(d,Z),severity:"warning",divineRequirement:!1},{name:"physics_constraints",description:"Morphology must respect physical laws and constraints",validator:d=>be(d),severity:"error",divineRequirement:!1},{name:"visual_quality",description:"Rendered output must meet aesthetic standards",validator:d=>xe(d,Z),severity:"warning",divineRequirement:!1}];class Ie{cocoons=new Map;validationRules=[...Se];async enterCocoon(e,t,n){const i={stage:"calculation",beeId:e,role:t,inputConstraints:n,rawCalculations:null,validationRules:this.getValidationRulesForRole(t),validationResults:[],emergenceThreshold:this.calculateEmergenceThreshold(t),validatedMorphology:null,renderingInstructions:null,entryTimestamp:Date.now(),stageTransitions:[],divineBlessing:!1,calculationProgress:0,validationProgress:0,manifestationProgress:0};return this.cocoons.set(e,i),E.emit(R.COCOON_ENTERED,{beeId:e,role:t,stage:"calculation",timestamp:Date.now()},{source:"physics-cocoon-engine"}),this.progressCocoon(e)}async progressCocoon(e){const t=this.cocoons.get(e);if(!t)throw new Error(`Cocoon not found for bee ${e}`);switch(t.stage){case"calculation":return this.calculateMorphology(t);case"validation":return this.validateMorphology(t);case"manifestation":return this.manifestBee(t)}}async calculateMorphology(e){e.calculationProgress=.1;try{return e.rawCalculations=W.calculateMorphology(e.role,e.inputConstraints),e.calculationProgress=1,this.transitionStage(e,"validation"),this.progressCocoon(e.beeId)}catch(t){throw E.emit(R.COCOON_FAILED,{beeId:e.beeId,stage:"calculation",error:t instanceof Error?t.message:"Unknown error",timestamp:Date.now()},{source:"physics-cocoon-engine"}),t}}async validateMorphology(e){if(!e.rawCalculations)throw new Error("No morphology to validate");e.validationProgress=.1,e.validationResults=[];for(let o=0;o<e.validationRules.length;o++){const c=e.validationRules[o],v=c.validator(e.rawCalculations);e.validationResults.push(v),e.validationProgress=(o+1)/e.validationRules.length,E.emit(R.VALIDATION_PROGRESS,{beeId:e.beeId,rule:c.name,result:v,progress:e.validationProgress,timestamp:Date.now()},{source:"physics-cocoon-engine"})}const n=e.validationResults.reduce((o,c)=>o+c.score,0)/e.validationResults.length,i=e.validationResults.filter((o,c)=>!o.passed&&e.validationRules[c].severity==="critical");if(n>=e.emergenceThreshold&&i.length===0)return e.validatedMorphology=e.rawCalculations,e.divineBlessing=n>=.9,this.transitionStage(e,"manifestation"),this.progressCocoon(e.beeId);throw E.emit(R.VALIDATION_FAILED,{beeId:e.beeId,averageScore:n,threshold:e.emergenceThreshold,criticalFailures:i.length,results:e.validationResults,timestamp:Date.now()},{source:"physics-cocoon-engine"}),new Error(`Validation failed: score ${n.toFixed(3)} < threshold ${e.emergenceThreshold}`)}async manifestBee(e){if(!e.validatedMorphology)throw new Error("No validated morphology to manifest");return e.manifestationProgress=.1,e.renderingInstructions=this.generateSVGInstructions(e.validatedMorphology,e.divineBlessing),e.manifestationProgress=1,E.emit(R.BEE_EMERGED,{beeId:e.beeId,role:e.role,morphology:e.validatedMorphology,renderingInstructions:e.renderingInstructions,divineBlessing:e.divineBlessing,validationScore:e.validationResults.reduce((t,n)=>t+n.score,0)/e.validationResults.length,timestamp:Date.now()},{source:"physics-cocoon-engine"}),e}generateSVGInstructions(e,t){const n=[],i=[],r=[];return n.push({type:"ellipse",attributes:{cx:e.abdomen.center.x,cy:e.abdomen.center.y,rx:e.abdomen.radius.x,ry:e.abdomen.radius.y},classes:["bee-part","abdomen"]},{type:"ellipse",attributes:{cx:e.thorax.center.x,cy:e.thorax.center.y,rx:e.thorax.radius.x,ry:e.thorax.radius.y},classes:["bee-part","thorax"]},{type:"circle",attributes:{cx:e.head.center.x,cy:e.head.center.y,r:e.head.radius},classes:["bee-part","head"]}),n.push({type:"ellipse",attributes:{cx:e.wings.left.center.x,cy:e.wings.left.center.y,rx:e.wings.left.radius.x,ry:e.wings.left.radius.y},classes:["bee-part","wing","wing-left"]},{type:"ellipse",attributes:{cx:e.wings.right.center.x,cy:e.wings.right.center.y,rx:e.wings.right.radius.x,ry:e.wings.right.radius.y},classes:["bee-part","wing","wing-right"]}),t&&(r.push({type:"aura",intensity:.8,color:"#f7dc6f",pattern:"radial-gradient"}),i.push({target:".divine-aura",property:"opacity",keyframes:[.3,.8,.3],duration:3e3,easing:"ease-in-out"})),{viewBox:e.viewBox,elements:n,animations:i,divineEffects:r}}transitionStage(e,t){const n={fromStage:e.stage,toStage:t,timestamp:Date.now(),duration:Date.now()-e.entryTimestamp,success:!0};e.stageTransitions.push(n),e.stage=t,E.emit(R.STAGE_TRANSITION,{beeId:e.beeId,transition:n,timestamp:Date.now()},{source:"physics-cocoon-engine"})}getValidationRulesForRole(e){return e==="chronicler"||e==="jules"?[...this.validationRules]:this.validationRules.filter(t=>!t.divineRequirement)}calculateEmergenceThreshold(e){return e==="chronicler"||e==="jules"?.85:e==="queen"?.8:.7}getCocoonStatus(e){return this.cocoons.get(e)||null}getActiveCocoons(){return Array.from(this.cocoons.values())}releaseCocoon(e){this.cocoons.delete(e)}getStatus(){return{activeCocoons:this.cocoons.size,totalProcessed:0,averageProcessingTime:0,successRate:1}}}const G=new Ie;function Me(d,e){const t=Math.abs(e.activityLevel-d.activityLevel),n=Math.abs(e.focusIntensity-d.focusIntensity),i=Math.abs(e.socialAlignment-d.socialAlignment),r=e.collaborationMode==="sacred"||d.collaborationMode==="sacred"?.7:.5;return t<=r&&n<=r&&i<=r}function Ee(d){return 1-Math.pow(1-d,1.618033988749/2)}function Te(d,e){switch(e){case"linear":return d;case"ease-out":return 1-Math.pow(1-d,2);case"divine":default:return Ee(d)}}function re(d,e,t,n="divine"){const i=Te(t,n);return{activityLevel:d.activityLevel+(e.activityLevel-d.activityLevel)*i,focusIntensity:d.focusIntensity+(e.focusIntensity-d.focusIntensity)*i,socialAlignment:d.socialAlignment+(e.socialAlignment-d.socialAlignment)*i,collaborationMode:i<.5?d.collaborationMode:e.collaborationMode,purpose:i<.3?d.purpose:e.purpose,emotionalState:i<.5?d.emotionalState:e.emotionalState}}class _e{activeTransitions=new Map;animationFrames=new Map;async startTransition(e,t,n,i={}){const{duration:r=1e3,easing:o="divine",validateTransition:c=!0}=i;if(c&&!Me(t,n))throw E.emit(R.VALIDATION_FAILED,{beeId:e,reason:"Intent transition too extreme",from:t,to:n,timestamp:Date.now()},{source:"intent-transition-manager"}),new Error(`Intent transition validation failed for bee ${e}: transition too extreme`);this.cancelTransition(e);const v={beeId:e,from:{...t},to:{...n},progress:0,duration:r,startTime:Date.now(),isValid:!0};return this.activeTransitions.set(e,v),E.emit(R.INTENT_TRANSITION_STARTED,{beeId:e,from:t,to:n,duration:r,timestamp:Date.now()},{source:"intent-transition-manager"}),new Promise(u=>{const g=()=>{const m=this.activeTransitions.get(e);if(!m){u();return}const S=Date.now()-m.startTime,l=Math.min(S/m.duration,1);if(m.progress=l,E.emit(R.INTENT_TRANSITION_PROGRESS,{beeId:e,progress:l,currentIntent:re(t,n,l,o),timestamp:Date.now()},{source:"intent-transition-manager"}),l>=1)this.completeTransition(e),u();else{const x=requestAnimationFrame(g);this.animationFrames.set(e,x)}};g()})}getCurrentIntent(e,t){const n=this.activeTransitions.get(e);return n?re(n.from,n.to,n.progress):t}isTransitioning(e){return this.activeTransitions.has(e)}cancelTransition(e){const t=this.animationFrames.get(e);t&&(cancelAnimationFrame(t),this.animationFrames.delete(e)),this.activeTransitions.get(e)&&(this.activeTransitions.delete(e),E.emit(R.INTENT_TRANSITION_PROGRESS,{beeId:e,cancelled:!0,timestamp:Date.now()},{source:"intent-transition-manager"}))}completeTransition(e){const t=this.activeTransitions.get(e);t&&(this.cancelTransition(e),E.emit(R.INTENT_EMERGENCE_READY,{beeId:e,finalIntent:t.to,transitionDuration:Date.now()-t.startTime,timestamp:Date.now()},{source:"intent-transition-manager"}))}getActiveTransitions(){return Array.from(this.activeTransitions.values())}getStatus(){return{activeTransitions:this.activeTransitions.size,totalTransitions:0}}cleanup(){for(const e of this.activeTransitions.keys())this.cancelTransition(e)}}const j=new _e,Re=(d,e,t,n)=>j.startTransition(d,e,t,n),De=(d,e)=>j.getCurrentIntent(d,e),U={maxInfluenceDistance:150,updateInterval:100,roleModifiers:{queen:2,chronicler:1.8,jules:1.5,guard:1.2,scout:1,worker:.8},emotionalModifiers:{divine:1.5,excited:1.3,protective:1.2,focused:1,calm:.8}};class Ae{beePositions=new Map;influences=new Map;maxInfluenceDistance=U.maxInfluenceDistance;updateInterval=U.updateInterval;lastUpdate=0;updateBeePosition(e){this.beePositions.set(e.beeId,{...e,timestamp:Date.now()});const t=Date.now();t-this.lastUpdate>this.updateInterval&&(this.calculateInfluences(),this.lastUpdate=t)}removeBee(e){this.beePositions.delete(e),this.influences.delete(e);for(const[t,n]of this.influences.entries())this.influences.set(t,n.filter(i=>i.sourceBee!==e))}getInfluencesForBee(e){return this.influences.get(e)||[]}getAllPositions(){return Array.from(this.beePositions.values())}calculateDistance(e,t){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}calculateInfluenceStrength(e,t,n){const i=Math.max(0,1-(n/this.maxInfluenceDistance)**2),r=U.roleModifiers[e.role]||1,o=U.emotionalModifiers[e.emotionalState]||1;return i*r*o}calculateDecayFactor(e,t){return this.getEmotionalCompatibility(e.emotionalState,t.emotionalState)>.5?.95:.85}getEmotionalCompatibility(e,t){return{calm:{calm:1,focused:.8,divine:.7,excited:.3,protective:.4},excited:{excited:1,focused:.6,protective:.7,calm:.3,divine:.5},focused:{focused:1,calm:.8,divine:.9,excited:.6,protective:.7},protective:{protective:1,excited:.7,focused:.7,calm:.4,divine:.6},divine:{divine:1,focused:.9,calm:.7,protective:.6,excited:.5}}[e]?.[t]||.5}calculateInfluences(){this.influences.clear();const e=Array.from(this.beePositions.values());for(const t of e){const n=[];for(const i of e){if(i.beeId===t.beeId)continue;const r=this.calculateDistance(i,t);if(r<=this.maxInfluenceDistance){const o=this.calculateInfluenceStrength(i,t,r);o>.1&&n.push({sourceBee:i.beeId,targetBee:t.beeId,distance:r,influenceStrength:o,emotionalVector:i.emotionalState,decayFactor:this.calculateDecayFactor(i,t)})}}n.sort((i,r)=>r.influenceStrength-i.influenceStrength),this.influences.set(t.beeId,n)}}getMetrics(){const t=Array.from(this.beePositions.values()).length;let n=0,i=0,r=0,o=0;for(const c of this.influences.values()){n+=c.length,c.length>0&&o++;for(const v of c)i+=v.distance,r++}return{totalBees:t,activeInfluences:n,averageDistance:r>0?i/r:0,clusteredBees:o,isolatedBees:t-o}}getStatus(){return{status:"active",beesTracked:this.beePositions.size,influencesActive:Array.from(this.influences.values()).reduce((e,t)=>e+t.length,0),lastUpdate:this.lastUpdate}}configure(e){e.maxInfluenceDistance!==void 0&&(this.maxInfluenceDistance=e.maxInfluenceDistance),e.updateInterval!==void 0&&(this.updateInterval=e.updateInterval)}}const B=new Ae,Ce={enabled:!0,influenceStrength:.7,propagationSpeed:.5,resistanceFactors:{queen:.3,chronicler:.2,jules:.4,guard:.5,scout:.8,worker:.7},emotionalMomentum:.6},Pe=10;class Fe{activeInfluences=new Map;emotionalHistory=new Map;contagionEvents=0;lastUpdate=0;updateInterval=200;config={...Ce};processContagion(){if(!this.config.enabled)return;const e=Date.now();if(e-this.lastUpdate<this.updateInterval)return;this.lastUpdate=e,this.activeInfluences.clear();const t=B.getAllPositions();for(const n of t){const i=B.getInfluencesForBee(n.beeId);if(i.length>0){const r=this.calculateEmotionalInfluence(n,i);r&&(this.activeInfluences.set(n.beeId,[r]),this.emitContagionEvent(r))}}}calculateEmotionalInfluence(e,t){const n=new Map;for(const g of t){const m=g.emotionalVector;n.has(m)||n.set(m,[]),n.get(m).push(g)}const i=new Map;for(const[g,m]of n.entries()){const S=m.reduce((l,x)=>l+x.influenceStrength*this.config.influenceStrength,0);i.set(g,S)}let r="",o=0;for(const[g,m]of i.entries())m>o&&(r=g,o=m);const c=this.config.resistanceFactors[e.role]||.5,v=this.getEmotionalMomentum(e.beeId,e.emotionalState),u=c+v;return o>u&&r!==e.emotionalState?{targetBeeId:e.beeId,sourceEmotions:Array.from(i.keys()),influenceStrength:o,targetEmotion:r,transitionSpeed:this.calculateTransitionSpeed(o),timestamp:Date.now()}:null}getEmotionalMomentum(e,t){const n=this.emotionalHistory.get(e)||[];if(n.length===0)return 0;const i=n.slice(-5);return i.filter(o=>o===t).length/i.length*this.config.emotionalMomentum}calculateTransitionSpeed(e){const t=this.config.propagationSpeed,n=Math.min(e*2,2);return t*n}updateEmotionalHistory(e,t){this.emotionalHistory.has(e)||this.emotionalHistory.set(e,[]);const n=this.emotionalHistory.get(e);n.push(t),n.length>Pe&&n.shift()}getInfluenceForBee(e){const t=this.activeInfluences.get(e);return t&&t.length>0?t[0]:null}getAllInfluences(){return new Map(this.activeInfluences)}emitContagionEvent(e){this.contagionEvents++,E.emit(R.EMOTIONAL_CONTAGION,{targetBeeId:e.targetBeeId,sourceEmotions:e.sourceEmotions,targetEmotion:e.targetEmotion,influenceStrength:e.influenceStrength,transitionSpeed:e.transitionSpeed},{source:"emotional-contagion-engine",priority:"normal"})}triggerEmotionalWave(e,t,n=1){const i=B.getAllPositions();if(!i.find(c=>c.beeId===e)){console.warn(`EmotionalContagion: Source bee '${e}' not found for emotional wave. Available bees:`,i.map(c=>c.beeId));return}const o=B.getInfluencesForBee(e);for(const c of o){const v={targetBeeId:c.targetBee,sourceEmotions:[t],influenceStrength:n*2,targetEmotion:t,transitionSpeed:this.config.propagationSpeed*1.5,timestamp:Date.now()};this.activeInfluences.set(c.targetBee,[v]),this.emitContagionEvent(v)}E.emit(R.EMOTIONAL_WAVE_TRIGGERED,{sourceBeeId:e,emotion:t,intensity:n,affectedBees:o.length},{source:"emotional-contagion-engine",priority:"high"})}getMetrics(){const e=Array.from(this.activeInfluences.values()).flat(),t=new Map;let n=0;for(const v of e){const u=v.targetEmotion;t.set(u,(t.get(u)||0)+1),n+=v.influenceStrength}let i="calm",r=0;for(const[v,u]of t.entries())u>r&&(i=v,r=u);const o=Array.from(t.values()).reduce((v,u)=>v+u,0);let c=0;if(o>0)for(const v of t.values()){const u=v/o;u>0&&(c-=u*Math.log2(u))}return{activeInfluences:e.length,emotionalWaves:this.contagionEvents,averageInfluenceStrength:e.length>0?n/e.length:0,dominantEmotion:i,emotionalDiversity:c,contagionEvents:this.contagionEvents}}configure(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}getStatus(){return{status:"active",enabled:this.config.enabled,activeInfluences:Array.from(this.activeInfluences.values()).flat().length,lastUpdate:this.lastUpdate}}reset(){this.activeInfluences.clear(),this.emotionalHistory.clear(),this.contagionEvents=0}}const k=new Fe,$e=["viewBox","aria-labelledby"],Be=["id"],ke=["id","width","height"],Ne=["width","height"],Le=["width","height","fill"],Oe=["id"],He=["id"],qe=["cx","cy","rx","ry","fill"],Ve=["cx","cy","rx","ry","fill"],ze=["cx","cy","rx","ry","fill"],Ge=["cx","cy","r","fill"],Ue={class:"wing-connectors"},We=["cx","cy","rx","ry","fill"],je=["cx","cy","rx","ry","fill"],Ye=["points","fill"],Je={key:0,class:"genesis-features"},Qe=["points"],Xe={key:1,class:"sacred-elements"},Ke=["x","y","width","height","fill","stroke","rx"],Ze=["cx","cy","r","stroke","stroke-width","opacity"],et=["x1","y1","x2","y2","stroke","stroke-width"],tt={key:2,class:"implementation-features"},nt=["x1","y1","x2","y2","stroke","stroke-width"],it=le({__name:"BeeOrganellaHive",props:{type:{},size:{},physics:{},intent:{},onPollenEvent:{type:Function},useCocoon:{type:Boolean},smoothTransitions:{type:Boolean}},setup(d){const e=d,t=I(`bee_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),n=I("none"),i=I(0),r=I([]),o=I(!1),c=I(!1),v=I(0),u=I(null),g=M(()=>({baseUnit:20,scaleFactor:e.size||1,aspectRatio:1.2,energyLevel:.8,...e.physics})),m=M(()=>{const h={...{activityLevel:.5,focusIntensity:.7,collaborationMode:"individual",purpose:"general",emotionalState:"calm",socialAlignment:.7},...{worker:{activityLevel:.6,purpose:"construction"},scout:{activityLevel:.9,focusIntensity:.9,purpose:"exploration"},queen:{activityLevel:.3,focusIntensity:.8,collaborationMode:"swarm",purpose:"governance"},guard:{activityLevel:.7,focusIntensity:.95,purpose:"protection"},chronicler:{activityLevel:.4,focusIntensity:.95,collaborationMode:"sacred",purpose:"documentation"},jules:{activityLevel:.8,focusIntensity:.9,collaborationMode:"sacred",purpose:"debugging"}}[e.type]||{},...e.intent};return e.smoothTransitions&&c.value?De(t.value,h):h}),S=M(()=>({worker:{displayName:"Worker Bee",description:"Industrious builder",isDivine:!1,hasSpecialFeatures:!1},scout:{displayName:"Scout Bee",description:"Agile explorer",isDivine:!1,hasSpecialFeatures:!1},queen:{displayName:"Queen Bee",description:"Hive sovereign",isDivine:!1,hasSpecialFeatures:!0},guard:{displayName:"Guard Bee",description:"Protective sentinel",isDivine:!1,hasSpecialFeatures:!1},chronicler:{displayName:"bee.chronicler",description:"Sacred keeper of patterns",isDivine:!0,hasSpecialFeatures:!0},jules:{displayName:"bee.Jules",description:"Implementation detective",isDivine:!0,hasSpecialFeatures:!0}})[e.type]),l=M(()=>{const{baseUnit:y,scaleFactor:b,aspectRatio:h}=g.value,s=y*b,A={worker:{abdomen:1,thorax:.9,head:.7,wings:1},scout:{abdomen:.8,thorax:.8,head:.8,wings:1.1},queen:{abdomen:1.4,thorax:1.1,head:.8,wings:1.2},guard:{abdomen:1.1,thorax:1.2,head:.6,wings:1},chronicler:{abdomen:.9,thorax:.9,head:.8,wings:1.1},jules:{abdomen:1,thorax:.9,head:.8,wings:1}}[e.type],f=s*10;return{viewBox:`0 0 ${f} ${f*h}`,center:{x:f/2,y:f*h/2},abdomen:{center:{x:f/2,y:f*h*.6},radius:{x:s*1.2*A.abdomen,y:s*1.7*A.abdomen}},thorax:{center:{x:f/2,y:f*h*.4},radius:{x:s*.9*A.thorax,y:s*1*A.thorax}},head:{center:{x:f/2,y:f*h*.22},radius:s*.7*A.head},wings:{left:{center:{x:f/2-s*1,y:f*h*.4},radius:{x:s*1.5*A.wings,y:s*.7*A.wings}},right:{center:{x:f/2+s*1,y:f*h*.4},radius:{x:s*1.5*A.wings,y:s*.7*A.wings}}},stinger:{points:`${f/2},${f*h*.8} ${f/2-s*.2},${f*h*.9} ${f/2+s*.2},${f*h*.9}`},crown:{points:`${f/2-s*.4},${f*h*.12} ${f/2},${f*h*.05} ${f/2+s*.4},${f*h*.12}`},scroll:{x:f/2-s*.75,y:f*h*.1,width:s*1.5,height:s*.4,radius:s*.1},divineAura:{radius:s*1,strokeWidth:s*.1},quill:{start:{x:f/2+s*.75,y:f*h*.22},end:{x:f/2+s*1.25,y:f*h*.17},strokeWidth:s*.1},antenna:{start:{x:f/2+s*.5,y:f*h*.22},end:{x:f/2+s*1,y:f*h*.15},strokeWidth:s*.08},stripeWidth:s*.5,stripeHeight:s*.5}}),x=M(()=>({worker:{body:"#f4b400",wing:"rgba(200,240,255,0.5)",stripe:"#222"},scout:{body:"#ffdb55",wing:"rgba(200,240,255,0.6)",stripe:"#222"},queen:{body:"#d4943c",wing:"rgba(200,240,255,0.4)",stripe:"#222"},guard:{body:"#9c6d2c",wing:"rgba(200,240,255,0.5)",stripe:"#222"},chronicler:{body:"#d4af37",wing:"rgba(212, 175, 55, 0.4)",stripe:"#222",divine:"#f7dc6f",scroll:"#f4e4bc",scrollBorder:"#d4af37"},jules:{body:"#8b5cf6",wing:"rgba(139, 92, 246, 0.3)",stripe:"#222",debug:"#a855f7"}})[e.type]),D=M(()=>{const{activityLevel:y,collaborationMode:b}=m.value;return{wings:y>.8?"flap-fast":y>.5?"flap-normal":"flap-slow",divine:b==="sacred"?"divine-pulse":""}}),N=M(()=>({"--base-size":`${g.value.baseUnit*g.value.scaleFactor}px`,"--activity-level":m.value.activityLevel,"--focus-intensity":m.value.focusIntensity})),P=M(()=>({transformOrigin:`${l.value.center.x}px ${l.value.thorax.center.y}px`})),Y=M(()=>S.value.isDivine?.6:0),L=(y,b)=>{const h={id:`${t.value}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:y,source:`${e.type}_${t.value}`,payload:b,timestamp:Date.now(),priority:"normal"};e.onPollenEvent&&e.onPollenEvent(h)};ce(async()=>{u.value||(u.value=m.value),V(),O.value=setInterval(()=>{k.processContagion(),X()},200),e.useCocoon?await J():(L("bee_manifested",{type:e.type,instanceId:t.value,morphology:l.value,intent:m.value}),o.value=!0)}),ue(()=>{n.value!=="none"&&n.value!=="emerged"&&G.releaseCocoon(t.value),e.smoothTransitions&&j.cancelTransition(t.value),O.value&&clearInterval(O.value),B.removeBee(t.value)});const J=async()=>{try{n.value="calculating";const y={minSize:g.value.baseUnit*.5,maxSize:g.value.baseUnit*3,aspectRatioRange:[1,2],energyEfficiency:g.value.energyLevel},b=await G.enterCocoon(t.value,e.type,y);H()}catch(y){console.error("Cocoon entry failed:",y),n.value="none",L("bee_manifested",{type:e.type,instanceId:t.value,morphology:l.value,intent:m.value,cocoonFailed:!0}),o.value=!0}},H=()=>{const y=()=>{const b=G.getCocoonStatus(t.value);if(b){switch(b.stage){case"calculation":n.value="calculating",i.value=b.calculationProgress*.33;break;case"validation":n.value="validating",i.value=.33+b.validationProgress*.33,r.value=b.validationResults;break;case"manifestation":n.value="manifesting",i.value=.66+b.manifestationProgress*.34;break}if(b.stage==="manifestation"&&b.manifestationProgress>=1){n.value="emerged",i.value=1,o.value=!0,L("bee_manifested",{type:e.type,instanceId:t.value,morphology:b.validatedMorphology,intent:m.value,cocoonValidated:!0,divineBlessing:b.divineBlessing,validationScore:b.validationResults.reduce((h,s)=>h+s.score,0)/b.validationResults.length}),G.releaseCocoon(t.value);return}setTimeout(y,100)}};y()},q=async y=>{if(!e.smoothTransitions||!u.value){u.value=y;return}try{c.value=!0,v.value=0,await Re(t.value,u.value,y,{duration:1e3,easing:"divine",validateTransition:!0}),u.value=y}catch(b){console.warn("Intent transition failed:",b),u.value=y}finally{c.value=!1,v.value=0}},Q=I({x:0,y:0}),O=I(null),V=()=>{const y=Math.random()*400+100,b=Math.random()*300+100;Q.value={x:y,y:b},B.updateBeePosition({beeId:t.value,x:y,y:b,role:e.type,emotionalState:m.value.emotionalState,timestamp:Date.now()})},X=()=>{const y=k.getInfluenceForBee(t.value);if(y&&!c.value&&u.value){const b={...u.value,emotionalState:y.targetEmotion};k.updateEmotionalHistory(t.value,y.targetEmotion),q(b)}};return ee(()=>e.intent,y=>{if(y&&u.value&&!c.value){const b={...u.value,...y};q(b)}},{deep:!0}),ee(()=>m.value.emotionalState,y=>{V(),k.updateEmotionalHistory(t.value,y)}),(y,b)=>(_(),T("div",{class:"hive-bee-container",style:K(N.value)},[(_(),T("svg",{class:"hive-bee-svg",viewBox:l.value.viewBox,role:"img","aria-labelledby":`bee-${t.value}-title`},[a("title",{id:`bee-${t.value}-title`},w(S.value.displayName)+" - "+w(S.value.description),9,Be),a("defs",null,[a("pattern",{id:`stripes-${t.value}`,width:l.value.stripeWidth,height:l.value.stripeHeight,patternUnits:"userSpaceOnUse"},[a("rect",{width:l.value.stripeWidth,height:l.value.stripeHeight,fill:"inherit"},null,8,Ne),a("rect",{width:l.value.stripeWidth,height:l.value.stripeHeight/2,fill:x.value.stripe},null,8,Le)],8,ke),S.value.isDivine?(_(),T("filter",{key:0,id:`divine-aura-${t.value}`},[...b[0]||(b[0]=[a("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"},null,-1),a("feMerge",null,[a("feMergeNode",{in:"coloredBlur"}),a("feMergeNode",{in:"SourceGraphic"})],-1)])],8,Oe)):$("",!0)]),a("g",{id:`bee-aggregate-${t.value}`,class:"bee-aggregate"},[a("ellipse",{class:"bee-part abdomen",cx:l.value.center.x,cy:l.value.abdomen.center.y,rx:l.value.abdomen.radius.x,ry:l.value.abdomen.radius.y,fill:x.value.body},null,8,qe),a("ellipse",{class:"bee-part abdomen-stripes",cx:l.value.center.x,cy:l.value.abdomen.center.y,rx:l.value.abdomen.radius.x,ry:l.value.abdomen.radius.y,fill:`url(#stripes-${t.value})`},null,8,Ve),a("ellipse",{class:"bee-part thorax",cx:l.value.center.x,cy:l.value.thorax.center.y,rx:l.value.thorax.radius.x,ry:l.value.thorax.radius.y,fill:x.value.body},null,8,ze),a("circle",{class:"bee-part head",cx:l.value.center.x,cy:l.value.head.center.y,r:l.value.head.radius,fill:x.value.body},null,8,Ge),a("g",Ue,[a("ellipse",{class:C(["bee-part wing-left",D.value.wings]),cx:l.value.wings.left.center.x,cy:l.value.wings.left.center.y,rx:l.value.wings.left.radius.x,ry:l.value.wings.left.radius.y,fill:x.value.wing,style:K(P.value)},null,14,We),a("ellipse",{class:C(["bee-part wing-right",D.value.wings]),cx:l.value.wings.right.center.x,cy:l.value.wings.right.center.y,rx:l.value.wings.right.radius.x,ry:l.value.wings.right.radius.y,fill:x.value.wing,style:K(P.value)},null,14,je)]),a("polygon",{class:"bee-part stinger",points:l.value.stinger.points,fill:x.value.stripe},null,8,Ye),S.value.hasSpecialFeatures?(_(),T("g",Je,[y.type==="queen"?(_(),T("polygon",{key:0,class:"bee-part crown",points:l.value.crown.points,fill:"gold",stroke:"gold"},null,8,Qe)):$("",!0),y.type==="chronicler"?(_(),T("g",Xe,[a("rect",{class:"bee-part sacred-scroll",x:l.value.scroll.x,y:l.value.scroll.y,width:l.value.scroll.width,height:l.value.scroll.height,fill:x.value.scroll||"#f4e4bc",stroke:x.value.scrollBorder||"#d4af37","stroke-width":"1",rx:l.value.scroll.radius},null,8,Ke),a("circle",{class:C(["bee-part divine-emanation",D.value.divine]),cx:l.value.center.x,cy:l.value.head.center.y,r:l.value.divineAura.radius,fill:"none",stroke:x.value.divine||"#f7dc6f","stroke-width":l.value.divineAura.strokeWidth,opacity:Y.value},null,10,Ze),a("line",{class:"bee-part sacred-quill",x1:l.value.quill.start.x,y1:l.value.quill.start.y,x2:l.value.quill.end.x,y2:l.value.quill.end.y,stroke:x.value.divine||"#f7dc6f","stroke-width":l.value.quill.strokeWidth},null,8,et)])):$("",!0),y.type==="jules"?(_(),T("g",tt,[a("line",{class:"bee-part debug-antenna",x1:l.value.antenna.start.x,y1:l.value.antenna.start.y,x2:l.value.antenna.end.x,y2:l.value.antenna.end.y,stroke:x.value.debug||"#a855f7","stroke-width":l.value.antenna.strokeWidth},null,8,nt)])):$("",!0)])):$("",!0)],8,He)],8,$e))],4))}}),st=de(it,[["__scopeId","data-v-ea37747c"]]);class at{intentHistory=new Map;collaborationContexts=new Map;maxHistorySize=100;calculateAnimationIntent(e,t,n,i){this.updateIntentHistory(e,n);const r=this.getRoleBaseAnimation(t),o=this.calculateIntentModifiers(n),c=i?this.calculateCollaborationModifiers(i):{scale:1,intensity:1};return{wingFlapRate:r.wingFlapRate*o.activityMultiplier*c.intensity,wingFlapAmplitude:r.wingFlapAmplitude*o.focusMultiplier,movementPattern:this.determineMovementPattern(n,i),colorIntensity:Math.min(1,o.emotionalIntensity*c.intensity),glowEffect:n.collaborationMode==="sacred"||n.emotionalState==="divine",pulseRate:this.calculatePulseRate(n),transformations:{scale:r.scale*c.scale,rotation:this.calculateRotation(n,i),translation:this.calculateTranslation(n,i)}}}updateIntent(e,t,n){let i={...t};return n.threats?.length&&(i.activityLevel=Math.min(1,i.activityLevel+.3),i.emotionalState="protective",i.focusIntensity=Math.min(1,i.focusIntensity+.2)),n.opportunities?.length&&(i.activityLevel=Math.min(1,i.activityLevel+.2),i.emotionalState="excited"),n.sacredPresence&&(i.collaborationMode="sacred",i.emotionalState="divine",i.focusIntensity=Math.min(1,i.focusIntensity+.1)),n.swarmActivity&&n.swarmActivity>.5&&(i.collaborationMode="swarm",i.socialAlignment=Math.min(1,i.socialAlignment+.1)),i}getRoleBaseAnimation(e){const t={worker:{wingFlapRate:15,wingFlapAmplitude:20,scale:1,baseMovement:"hover"},scout:{wingFlapRate:25,wingFlapAmplitude:30,scale:.9,baseMovement:"patrol"},queen:{wingFlapRate:8,wingFlapAmplitude:15,scale:1.3,baseMovement:"meditate"},guard:{wingFlapRate:12,wingFlapAmplitude:25,scale:1.1,baseMovement:"guard"},chronicler:{wingFlapRate:10,wingFlapAmplitude:18,scale:1,baseMovement:"meditate"},jules:{wingFlapRate:18,wingFlapAmplitude:22,scale:1,baseMovement:"hover"}};return t[e]||t.worker}calculateIntentModifiers(e){return{activityMultiplier:.5+e.activityLevel*1.5,focusMultiplier:.7+e.focusIntensity*.6,emotionalIntensity:this.getEmotionalIntensity(e.emotionalState),socialHarmony:e.socialAlignment}}calculateCollaborationModifiers(e){const t=Math.min(1,e.swarmSize/10);return{follower:.9,coordinator:1.1,leader:1.3}[e.leadershipRole],{scale:1+t*.2,intensity:1+e.consensusLevel*.3,coordination:e.communicationActive?1.2:1}}determineMovementPattern(e,t){if(e.collaborationMode==="sacred")return e.emotionalState==="divine"?"meditate":"hover";if(e.collaborationMode==="swarm")return t?.communicationActive?"dance":"patrol";switch(e.emotionalState){case"protective":return"guard";case"excited":return"dance";case"focused":return"hover";case"divine":return"meditate";default:return"hover"}}calculatePulseRate(e){if(e.collaborationMode!=="sacred")return 0;const t=.5,n=.5+e.focusIntensity*.5,i=.8+e.activityLevel*.4;return t*n*i}calculateRotation(e,t){return e.collaborationMode==="swarm"&&t?.communicationActive?Math.sin(Date.now()/1e3)*5:e.emotionalState==="protective"?Math.sin(Date.now()/500)*10:0}calculateTranslation(e,t){return e.collaborationMode==="sacred"&&e.emotionalState==="divine"?{x:Math.sin(Date.now()/2e3)*2,y:Math.cos(Date.now()/3e3)*1}:e.emotionalState==="excited"?{x:Math.sin(Date.now()/800)*3,y:Math.abs(Math.sin(Date.now()/600))*2}:{x:0,y:0}}getEmotionalIntensity(e){return{calm:.6,excited:1,focused:.8,protective:.9,divine:1.2}[e]||.7}updateIntentHistory(e,t){this.intentHistory.has(e)||this.intentHistory.set(e,[]);const n=this.intentHistory.get(e);n.push({...t}),n.length>this.maxHistorySize&&n.shift()}getIntentTrends(e){const t=this.intentHistory.get(e);if(!t||t.length===0)return null;const n=t.reduce((u,g)=>u+g.activityLevel,0)/t.length,i=t.reduce((u,g)=>u+g.focusIntensity,0)/t.length,r=t.reduce((u,g)=>(u[g.emotionalState]=(u[g.emotionalState]||0)+1,u),{}),o=Object.entries(r).sort(([,u],[,g])=>g-u)[0]?.[0]||"calm",c=t.reduce((u,g)=>(u[g.collaborationMode]=(u[g.collaborationMode]||0)+1,u),{}),v=Object.entries(c).sort(([,u],[,g])=>g-u)[0]?.[0]||"individual";return{averageActivity:n,averageFocus:i,dominantEmotion:o,collaborationPreference:v}}getStatus(){const e=this.intentHistory.size;let t=0,n=0;const i={};for(const r of this.intentHistory.values())if(r.length>0){const o=r[r.length-1];t+=o.activityLevel,n++,i[o.collaborationMode]=(i[o.collaborationMode]||0)+1}return{status:"active",trackedBees:e,averageActivity:n>0?t/n:0,collaborationModes:i}}}const ot=new at,rt=(d,e={})=>{const t={worker:{activityLevel:.6,focusIntensity:.7,purpose:"construction"},scout:{activityLevel:.9,focusIntensity:.9,purpose:"exploration"},queen:{activityLevel:.3,focusIntensity:.8,purpose:"governance"},guard:{activityLevel:.7,focusIntensity:.95,purpose:"protection"},chronicler:{activityLevel:.4,focusIntensity:.95,purpose:"documentation"},jules:{activityLevel:.8,focusIntensity:.9,purpose:"debugging"}},n=t[d]||t.worker;return{activityLevel:n.activityLevel||.5,focusIntensity:n.focusIntensity||.7,collaborationMode:"individual",purpose:n.purpose||"general",emotionalState:"calm",socialAlignment:.7,...e}},lt={class:"hive-bee-test"},ct={class:"test-controls"},ut={class:"control-group"},dt={class:"control-group"},vt={class:"control-group"},gt={class:"control-group"},ht={class:"control-group"},mt={key:0,class:"control-group"},pt={class:"control-group"},yt={key:1,class:"control-group"},ft={class:"bee-showcase"},bt={class:"bee-info"},xt={class:"bee-stats"},wt={class:"bee-container"},St={class:"bee-comparison"},It={class:"bee-comparison"},Mt={class:"metrics-panel"},Et={class:"metrics-grid"},Tt={class:"metric"},_t={class:"metric"},Rt={class:"metric"},Dt={class:"metric"},At={class:"metric"},Ct={class:"metric"},Pt={class:"metric"},Ft={class:"metric"},$t={class:"metric"},Bt={class:"event-log"},kt={class:"events"},Nt={class:"event-type"},Lt={class:"event-source"},Ot={class:"event-time"},Ht=le({__name:"HiveBeeTest",setup(d){const e=I({baseUnit:50,scaleFactor:1,aspectRatio:1.2,energyLevel:.8}),t=I({activityLevel:.7,focusIntensity:.8,collaborationMode:"individual",emotionalState:"calm"}),n=I(!0),i=I(1e3),r=I(!0),o=I(.7),c=["worker","scout","queen","guard","chronicler","jules"],v=I([]),u=I({}),g=M(()=>W.getStatus()),m=M(()=>ot.getStatus()),S=M(()=>E.getMetrics()),l=M(()=>j.getStatus()),x=M(()=>k.getMetrics()),D=M(()=>B.getMetrics()),N=M(()=>v.value.slice(-10).reverse()),P=h=>rt(h,t.value),Y=h=>{const p=W.calculateMorphology(h).abdomen.radius;return`${Math.round(p.x)}√ó${Math.round(p.y)}`},L=h=>{const s=P(h);return`${Math.round(s.activityLevel*100)}% / ${s.emotionalState}`},J=h=>u.value[h]||0,H=h=>{if(h.type!=="intent_transition_progress"){if(!h||typeof h!="object"){console.warn("Invalid pollen event received:",h);return}v.value.push(h);try{if(h.source&&typeof h.source=="string"){const s=h.source.split("_")[0];s&&(u.value[s]=(u.value[s]||0)+1)}}catch(s){console.warn("Error processing event source:",h.source,s)}v.value.length>100&&(v.value=v.value.slice(-100))}},q=h=>{const p=Date.now()-h;return p<1e3?"now":p<6e4?`${Math.round(p/1e3)}s ago`:`${Math.round(p/6e4)}m ago`},Q=()=>{W.updateConfig(e.value)},O=()=>{["calm","excited","focused","protective","divine"].forEach((s,p)=>{setTimeout(()=>{t.value.emotionalState=s},p*300)})},V=()=>{setTimeout(()=>{t.value.activityLevel=.1},100),setTimeout(()=>{t.value.activityLevel=.9},600),setTimeout(()=>{t.value.activityLevel=.5},1100)},X=()=>{["individual","swarm","sacred"].forEach((s,p)=>{setTimeout(()=>{t.value.collaborationMode=s},p*800)})},y=()=>{const h="queen_"+Date.now();k.triggerEmotionalWave(h,"excited",o.value)},b=()=>{k.configure({enabled:r.value,influenceStrength:o.value,propagationSpeed:.5})};return ee([r,o],b),ce(()=>{E.subscribe(["*"],H),Q(),b()}),ue(()=>{E.clearHistory()}),(h,s)=>(_(),T("div",lt,[s[31]||(s[31]=a("h2",null,"üêù Hive-Aligned Bee Dancing Test",-1)),a("div",ct,[a("div",ut,[s[8]||(s[8]=a("label",null,"Physics Scale:",-1)),F(a("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>e.value.scaleFactor=p),type:"range",min:"0.5",max:"2",step:"0.1"},null,512),[[z,e.value.scaleFactor,void 0,{number:!0}]]),a("span",null,w(e.value.scaleFactor)+"x",1)]),a("div",dt,[s[9]||(s[9]=a("label",null,"Activity Level:",-1)),F(a("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>t.value.activityLevel=p),type:"range",min:"0",max:"1",step:"0.1"},null,512),[[z,t.value.activityLevel,void 0,{number:!0}]]),a("span",null,w(Math.round(t.value.activityLevel*100))+"%",1)]),a("div",vt,[s[11]||(s[11]=a("label",null,"Collaboration Mode:",-1)),F(a("select",{"onUpdate:modelValue":s[2]||(s[2]=p=>t.value.collaborationMode=p)},[...s[10]||(s[10]=[a("option",{value:"individual"},"Individual",-1),a("option",{value:"swarm"},"Swarm",-1),a("option",{value:"sacred"},"Sacred",-1)])],512),[[te,t.value.collaborationMode]])]),a("div",gt,[s[13]||(s[13]=a("label",null,"Emotional State:",-1)),F(a("select",{"onUpdate:modelValue":s[3]||(s[3]=p=>t.value.emotionalState=p)},[...s[12]||(s[12]=[ve('<option value="calm" data-v-eefe5181>Calm</option><option value="excited" data-v-eefe5181>Excited</option><option value="focused" data-v-eefe5181>Focused</option><option value="protective" data-v-eefe5181>Protective</option><option value="divine" data-v-eefe5181>Divine</option>',5)])],512),[[te,t.value.emotionalState]])]),a("div",ht,[a("label",null,[F(a("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>n.value=p),type:"checkbox",class:"smooth-checkbox"},null,512),[[ie,n.value]]),s[14]||(s[14]=ne(" Smooth Transitions ",-1))]),a("span",{class:C(n.value?"enabled":"disabled")},w(n.value?"‚úÖ Enabled":"‚ùå Disabled"),3)]),n.value?(_(),T("div",mt,[s[15]||(s[15]=a("label",null,"Transition Duration:",-1)),F(a("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>i.value=p),type:"range",min:"100",max:"2000",step:"100"},null,512),[[z,i.value,void 0,{number:!0}]]),a("span",null,w(i.value)+"ms",1)])):$("",!0),a("div",pt,[a("label",null,[F(a("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>r.value=p),type:"checkbox",class:"smooth-checkbox"},null,512),[[ie,r.value]]),s[16]||(s[16]=ne(" Emotional Contagion ",-1))]),a("span",{class:C(r.value?"enabled":"disabled")},w(r.value?"üß† Active":"üö´ Disabled"),3)]),r.value?(_(),T("div",yt,[s[17]||(s[17]=a("label",null,"Contagion Strength:",-1)),F(a("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>o.value=p),type:"range",min:"0.1",max:"2.0",step:"0.1"},null,512),[[z,o.value,void 0,{number:!0}]]),a("span",null,w(o.value)+"x",1)])):$("",!0),a("div",{class:"control-group"},[a("button",{onClick:O,class:"test-button"}," üéØ Test Rapid Changes "),a("button",{onClick:V,class:"test-button"}," ‚ö° Test Extreme Transitions "),a("button",{onClick:X,class:"test-button"}," ü§ù Test Collaboration Modes "),a("button",{onClick:y,class:"test-button"}," üåä Trigger Emotional Wave ")])]),a("div",ft,[(_(),T(se,null,ae(c,p=>a("div",{class:"bee-row",key:p},[a("div",bt,[a("h3",null,w(p),1),a("div",xt,[a("div",null,"Morph: "+w(Y(p)),1),a("div",null,"Intent: "+w(L(p)),1),a("div",null,"Events: "+w(J(p)),1)])]),a("div",wt,[a("div",St,[s[18]||(s[18]=a("h4",null,"Original (Magic Numbers)",-1)),oe(ge,{type:p,size:e.value.scaleFactor},null,8,["type","size"])]),a("div",It,[s[19]||(s[19]=a("h4",null,"Hive-Aligned (Physics + Intent)",-1)),oe(st,{type:p,physics:e.value,intent:P(p),smoothTransitions:n.value,onPollenEvent:H},null,8,["type","physics","intent","smoothTransitions"])])])])),64))]),a("div",Mt,[s[30]||(s[30]=a("h3",null,"üåø Hive Metrics",-1)),a("div",Et,[a("div",Tt,[s[20]||(s[20]=a("label",null,"Physics Status:",-1)),a("span",{class:C(g.value.status)},w(g.value.status),3)]),a("div",_t,[s[21]||(s[21]=a("label",null,"Intent Engine:",-1)),a("span",{class:C(m.value.status)},w(m.value.status),3)]),a("div",Rt,[s[22]||(s[22]=a("label",null,"Pollen Events:",-1)),a("span",null,w(S.value.eventsEmitted),1)]),a("div",Dt,[s[23]||(s[23]=a("label",null,"Active Bees:",-1)),a("span",null,w(m.value.trackedBees),1)]),a("div",At,[s[24]||(s[24]=a("label",null,"Active Transitions:",-1)),a("span",null,w(l.value.activeTransitions),1)]),a("div",Ct,[s[25]||(s[25]=a("label",null,"Smooth Transitions:",-1)),a("span",{class:C(n.value?"enabled":"disabled")},w(n.value?"ON":"OFF"),3)]),a("div",Pt,[s[26]||(s[26]=a("label",null,"Emotional Influences:",-1)),a("span",null,w(x.value.activeInfluences),1)]),a("div",Ft,[s[27]||(s[27]=a("label",null,"Dominant Emotion:",-1)),a("span",null,w(x.value.dominantEmotion),1)]),a("div",$t,[s[28]||(s[28]=a("label",null,"Clustered Bees:",-1)),a("span",null,w(D.value.clusteredBees)+"/"+w(D.value.totalBees),1)])]),a("div",Bt,[s[29]||(s[29]=a("h4",null,"Recent Pollen Events:",-1)),a("div",kt,[(_(!0),T(se,null,ae(N.value,p=>(_(),T("div",{key:p.id,class:C(["event",p.priority])},[a("span",Nt,w(p.type),1),a("span",Lt,w(p.source),1),a("span",Ot,w(q(p.timestamp)),1)],2))),128))])])])]))}}),Vt=de(Ht,[["__scopeId","data-v-eefe5181"]]);export{Vt as default};
