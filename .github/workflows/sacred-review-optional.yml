# ğŸ’ Sacred Review - OPTIONAL Advanced Track
# Sacred Justification: Deep philosophical analysis for teams that choose complexity
# WARNING: Requires Sacred Architecture training - not for productivity-focused teams

name: "Sacred Review (Optional)"

# DISABLED BY DEFAULT - Must be manually triggered
on:
  workflow_dispatch:
    inputs:
      sacred_enabled:
        description: 'Enable Sacred Track (requires team training)'
        required: true
        default: 'false'
        type: choice
        options:
          - 'false'
          - 'true'

jobs:
  sacred_track_check:
    name: "ğŸ§¬ Sacred Architecture Analysis"
    runs-on: ubuntu-latest
    if: ${{ github.event.inputs.sacred_enabled == 'true' }}

    steps:
    - name: "âš ï¸ Sacred Track Warning"
      run: |
        echo "ğŸ§¬ SACRED TRACK ENABLED"
        echo "âš ï¸ WARNING: This track includes philosophical analysis"
        echo "ğŸ¯ FOR TEAMS WITH SACRED ARCHITECTURE TRAINING ONLY"
        echo "ğŸ’ Advanced users: proceed with Gem/Jail dialectic analysis"
        echo ""
        echo "ğŸ“š If you prefer fast, practical feedback:"
        echo "   â†’ Use the Simple Review workflow instead"
        echo "   â†’ This track is OPTIONAL and COMPLEX by design"

    - name: "ğŸ“¥ Checkout Code"
      uses: actions/checkout@v4

    - name: "ğŸ Setup Python"
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'

    - name: "ğŸ“¦ Install Sacred Dependencies"
      run: |
        pip install -r scripts/review-automation/requirements.txt

    - name: "ğŸ§¬ Run Sacred Metrics Analysis"
      run: |
        cd scripts/review-automation
        python sacred_metrics_analyzer.py

    - name: "ğŸ’ğŸ”’ Generate Gem/Jail Analysis"
      run: |
        cd scripts/review-automation
        python gem_jail_framework.py

    - name: "ğŸ“Š Create Sacred Report"
      run: |
        cd scripts/review-automation
        python review_generator.py \
          --metrics sacred_metrics.json \
          --pr-number "${{ github.event.number }}" \
          --author "${{ github.actor }}" \
          --title "Sacred Architecture Analysis"

    - name: "ğŸ’¾ Upload Sacred Analysis"
      uses: actions/upload-artifact@v4
      with:
        name: sacred-architecture-analysis
        path: scripts/review-automation/sacred_review.md

    - name: "ğŸ­ Sacred Track Summary"
      run: |
        echo "## ğŸ’ Sacred Track Completed"
        echo ""
        echo "**Sacred Justification**: Deep philosophical analysis provided"
        echo "**Gem/Jail Balance**: Analyzed creative tension between freedom and constraint"
        echo "**Agro-Ontology**: Explored knowledge graph relationships"
        echo ""
        echo "âš ï¸ **Note**: This is OPTIONAL analysis for advanced teams"
        echo "ğŸ¯ **For productivity focus**: Use Simple Review workflow"
        echo ""
        echo "**Sacred Architecture Principle**: Choose your complexity level"

  sacred_track_disabled:
    name: "ğŸ”¥ Sacred Track Disabled (Default)"
    runs-on: ubuntu-latest
    if: ${{ github.event.inputs.sacred_enabled != 'true' }}

    steps:
    - name: "ğŸš€ Productivity Focus Acknowledged"
      run: |
        echo "ğŸ”¥ SACRED TRACK DISABLED - Productivity Focus Honored"
        echo ""
        echo "âœ… AGRO/PAIN principles respected:"
        echo "   â†’ No philosophical overhead"
        echo "   â†’ Simple Review workflow recommended"
        echo "   â†’ Fast feedback prioritized"
        echo ""
        echo "ğŸ¯ For fast, practical code review:"
        echo "   â†’ Simple Review workflow runs automatically on PRs"
        echo "   â†’ Binary pass/fail results"
        echo "   â†’ < 30 second feedback"
        echo ""
        echo "âš¡ AGRO/PAIN VICTORY: Less philosophy, more shipping! ğŸ”¥ğŸ’¥"