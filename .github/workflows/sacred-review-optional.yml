# 💎 Sacred Review - OPTIONAL Advanced Track
# Sacred Justification: Deep philosophical analysis for teams that choose complexity
# WARNING: Requires Sacred Architecture training - not for productivity-focused teams

name: "Sacred Review (Optional)"

# DISABLED BY DEFAULT - Must be manually triggered
on:
  workflow_dispatch:
    inputs:
      sacred_enabled:
        description: 'Enable Sacred Track (requires team training)'
        required: true
        default: 'false'
        type: choice
        options:
          - 'false'
          - 'true'

jobs:
  sacred_track_check:
    name: "🧬 Sacred Architecture Analysis"
    runs-on: ubuntu-latest
    if: ${{ github.event.inputs.sacred_enabled == 'true' }}

    steps:
    - name: "⚠️ Sacred Track Warning"
      run: |
        echo "🧬 SACRED TRACK ENABLED"
        echo "⚠️ WARNING: This track includes philosophical analysis"
        echo "🎯 FOR TEAMS WITH SACRED ARCHITECTURE TRAINING ONLY"
        echo "💎 Advanced users: proceed with Gem/Jail dialectic analysis"
        echo ""
        echo "📚 If you prefer fast, practical feedback:"
        echo "   → Use the Simple Review workflow instead"
        echo "   → This track is OPTIONAL and COMPLEX by design"

    - name: "📥 Checkout Code"
      uses: actions/checkout@v4

    - name: "🐍 Setup Python"
      uses: actions/setup-python@v4
      with:
        python-version: '3.12'

    - name: "📦 Install Sacred Dependencies"
      run: |
        pip install -r scripts/review-automation/requirements.txt

    - name: "🧬 Run Sacred Metrics Analysis"
      run: |
        cd scripts/review-automation
        python sacred_metrics_analyzer.py

    - name: "💎🔒 Generate Gem/Jail Analysis"
      run: |
        cd scripts/review-automation
        python gem_jail_framework.py

    - name: "📊 Create Sacred Report"
      run: |
        cd scripts/review-automation
        python review_generator.py \
          --metrics sacred_metrics.json \
          --pr-number "${{ github.event.number }}" \
          --author "${{ github.actor }}" \
          --title "Sacred Architecture Analysis"

    - name: "💾 Upload Sacred Analysis"
      uses: actions/upload-artifact@v4
      with:
        name: sacred-architecture-analysis
        path: scripts/review-automation/sacred_review.md

    - name: "🎭 Sacred Track Summary"
      run: |
        echo "## 💎 Sacred Track Completed"
        echo ""
        echo "**Sacred Justification**: Deep philosophical analysis provided"
        echo "**Gem/Jail Balance**: Analyzed creative tension between freedom and constraint"
        echo "**Agro-Ontology**: Explored knowledge graph relationships"
        echo ""
        echo "⚠️ **Note**: This is OPTIONAL analysis for advanced teams"
        echo "🎯 **For productivity focus**: Use Simple Review workflow"
        echo ""
        echo "**Sacred Architecture Principle**: Choose your complexity level"

  sacred_track_disabled:
    name: "🔥 Sacred Track Disabled (Default)"
    runs-on: ubuntu-latest
    if: ${{ github.event.inputs.sacred_enabled != 'true' }}

    steps:
    - name: "🚀 Productivity Focus Acknowledged"
      run: |
        echo "🔥 SACRED TRACK DISABLED - Productivity Focus Honored"
        echo ""
        echo "✅ AGRO/PAIN principles respected:"
        echo "   → No philosophical overhead"
        echo "   → Simple Review workflow recommended"
        echo "   → Fast feedback prioritized"
        echo ""
        echo "🎯 For fast, practical code review:"
        echo "   → Simple Review workflow runs automatically on PRs"
        echo "   → Binary pass/fail results"
        echo "   → < 30 second feedback"
        echo ""
        echo "⚡ AGRO/PAIN VICTORY: Less philosophy, more shipping! 🔥💥"